<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒŒæ™¯å¤‰æ›´ä»˜ãè¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ </title>
    <style>
        body {
            /* èƒŒæ™¯ç”»åƒã®è¨­å®šã¯JavaScriptã§è¡Œã†ãŸã‚ã€ã“ã“ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’è¨­å®š */
            background-color: #f5f7fa; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®èƒŒæ™¯è‰² */
            background-size: cover; /* èƒŒæ™¯ç”»åƒã‚’ç”»é¢å…¨ä½“ã«åºƒã’ã‚‹ */
            background-position: center center; /* èƒŒæ™¯ç”»åƒã‚’ä¸­å¤®ã«é…ç½® */
            background-repeat: no-repeat; /* èƒŒæ™¯ç”»åƒã‚’ç¹°ã‚Šè¿”ã•ãªã„ */
            transition: background-image 0.5s ease; /* èƒŒæ™¯ç”»åƒã®å¤‰æ›´ã‚’æ»‘ã‚‰ã‹ã« */
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* èƒŒæ™¯ãŒã¯ã¿å‡ºãªã„ã‚ˆã†ã« */
        }

        .container {
            background-color: rgba(255, 255, 255, 0.9); /* å°‘ã—é€æ˜ã«ã—ã¦èƒŒæ™¯ç”»åƒãŒè¦‹ãˆã‚‹ã‚ˆã†ã« */
            width: 100%;
            max-width: 350px;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            position: relative; /* å­è¦ç´ ã®é…ç½®ç”¨ */
            z-index: 10; /* èƒŒæ™¯ç”»åƒã‚ˆã‚Šæ‰‹å‰ã«è¡¨ç¤º */
        }

        h3 {
            margin-top: 0;
            color: #333;
            text-align: center;
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-top: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }

        input[type="text"],
        input[type="number"] { /* inputã‚¿ã‚°ã®ã‚¿ã‚¤ãƒ—ã‚’é™å®šã—ã¦ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ */
            width: 100%; padding: 12px; margin-bottom: 5px; box-sizing: border-box;
            border: 2px solid #eee; border-radius: 8px; font-size: 1rem; outline: none;
        }
        input[type="text"]:focus,
        input[type="number"]:focus {
            border-color: #007bff; box-shadow: 0 0 8px rgba(0, 123, 255, 0.2);
        }

        /* ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="file"] {
            width: 100%;
            padding: 8px; /* é€šå¸¸ã®inputã‚ˆã‚Šå°‘ã—å°ã•ã‚ */
            margin-top: 15px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #f0f0f0;
            cursor: pointer;
        }
        input[type="file"]::file-selector-button { /* ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³è‡ªä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        input[type="file"]::file-selector-button:hover {
            background-color: #0056b3;
        }


        .hint { font-size: 0.75rem; color: #aaa; margin-bottom: 15px; }
        .result-area { margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 12px; text-align: center; }
        .result-label { display: block; font-size: 0.9rem; color: #666; margin-bottom: 5px; }
        .result { font-weight: 900; color: #007bff; font-size: 1.8rem; }
    </style>
</head>
<body>

    <div class="container">
        <h3>ğŸ’° åˆè¨ˆé‡‘é¡è¨ˆç®—æ©Ÿ</h3>
        
        <label>å˜ä¾¡ (å…¥åŠ›å¾Œã€å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã§1000å€)</label>
        <input type="text" id="price" placeholder="ä¾‹: 3" onchange="processPrice()">
        <p class="hint">â€»3ã¨æ‰“ã¦ã°3,000ã«ãªã‚Šã¾ã™</p>
        
        <label>å€‹æ•°</label>
        <input type="number" id="quantity" value="1" oninput="calculate()">
        
        <label>èƒŒæ™¯ç”»åƒã‚’å¤‰æ›´</label>
        <input type="file" id="backgroundImageInput" accept="image/*" onchange="changeBackground()">
        <p class="hint">â€»ç”»åƒã‚’é¸æŠã™ã‚‹ã¨èƒŒæ™¯ã«åæ˜ ã•ã‚Œã¾ã™</p>

        <div class="result-area">
            <span class="result-label">ãŠæ”¯æ‰•ã„åˆè¨ˆ</span>
            <span id="total" class="result">0</span><span style="margin-left:5px">å††</span>
        </div>
    </div>

    <script>
        // 1. å˜ä¾¡ãŒå…¥åŠ›ã•ã‚Œã€ç¢ºå®šã—ãŸæ™‚ã®å‡¦ç†
        function processPrice() {
            const priceInput = document.getElementById('price');
            let val = priceInput.value.replace(/[^0-9]/g, '');

            if (val !== "") {
                const multipliedPrice = Number(val) * 1000;
                priceInput.value = multipliedPrice.toLocaleString();
            }
            calculate();
        }

        // 2. åˆè¨ˆã‚’è¨ˆç®—ã—ã¦è¡¨ç¤ºã™ã‚‹å‡¦ç†
        function calculate() {
            const priceInput = document.getElementById('price');
            const quantityInput = document.getElementById('quantity');
            const totalElement = document.getElementById('total');

            const priceNum = Number(priceInput.value.replace(/,/g, ''));
            const quantityNum = Number(quantityInput.value);

            const total = priceNum * quantityNum;

            totalElement.innerText = total.toLocaleString();

            if (total >= 10000) {
                totalElement.style.color = "#e74c3c"; // èµ¤
            } else {
                totalElement.style.color = "#007bff"; // é’
            }
        }

        // 3. èƒŒæ™¯ç”»åƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å‡¦ç† (æ–°ã—ã„é–¢æ•°)
        function changeBackground() {
            const input = document.getElementById('backgroundImageInput');
            
            // ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚ŒãŸã‹ãƒã‚§ãƒƒã‚¯
            if (input.files && input.files[0]) {
                const reader = new FileReader(); // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

                reader.onload = function(e) {
                    // èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰ã€ãã®ç”»åƒã‚’èƒŒæ™¯ã«è¨­å®š
                    document.body.style.backgroundImage = `url('${e.target.result}')`;
                };

                // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’URLã¨ã—ã¦èª­ã¿è¾¼ã‚€
                reader.readAsDataURL(input.files[0]);
            }
        }

        // æœ€åˆã®è¨ˆç®—ã‚’å®Ÿè¡Œã—ã¦åˆæœŸå€¤ã‚’è¡¨ç¤º
        document.addEventListener('DOMContentLoaded', calculate);
    </script>

</body>
</html>
